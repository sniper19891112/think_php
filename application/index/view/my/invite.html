<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport"
        content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta content="telephone=yes" name="format-detection" />
    <meta name="apple-mobile-web-app-status-bar-style" content="white" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <title>{:lang('推广海报')}</title>
    <link rel="stylesheet" href="/statics/css/global.css" />
    <link rel="stylesheet" href="/web/css/invitation_code.css" />
    <link rel="stylesheet" href="/static_new/css/public.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined">
    <script charset="utf-8" src="/static_new/js/jquery.min.js"></script>
    <script charset="utf-8" src="/static_new/js/dialog.min.js"></script>
    <script charset="utf-8" src="/static_new/js/common.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body>
    <div id="app">
        <div class="invitation-header">
            <i class="material-icons-outlined" style="margin-right: 10px; cursor: pointer;" onclick="goBack()">
                arrow_back
            </i>
            {:lang('invitation_code')}
        </div>
        <div class="invitation-container">
            <div class="invitation-link-container">
                <div class="invitation-link-header">{:lang('invitation_link')}</div>
                <div style="padding-top: 52px;"></div>
                <div id="qrcode" class="qrcode-img"></div>
                <div class="invitation-code">{$invite_code}</div>
                <div class="text-center">
                    <button class="invitation-link-copy-btn" onclick="copyWalletAddress()">Copy Link</button>
                </div>
            </div>
        </div>
        <input type="hidden" value="{$url}" id="invitation_url"/>
    </div>
</body>
<script type="application/javascript">
    function goBack() {
        window.history.go(-1);
    }
    // jQuery function to generate QR code when button is clicked
    $(document).ready(function () {
        $("#qrcode").empty();
        new QRCode(document.getElementById("qrcode"), {
            text: $("#invitation_url").val(),
            width: 168,
            height: 168
        });
    });
    function copyWalletAddress() {
        // Copy text to clipboard using Clipboard API
        navigator.clipboard.writeText($("#invitation_url").val()).then(function () {
            $(document).dialog({infoText: '{:lang("copy_success")}'});
        }).catch(function (err) {
            console.error('Error copying text: ', err);
        });
    }
</script>

</html>